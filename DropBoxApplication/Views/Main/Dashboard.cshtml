@model IEnumerable<DropBoxApplication.Models.OrderStatusModel>
@{
    ViewBag.Title = "Dashboard";
    Layout = "~/Views/Shared/_MainLayout.cshtml";
}


<div class="panel panel-default">
    @*<div class="panel-heading">Orders</div>*@
    <div class="panel-body">
        <div class="col-sm-12">
            <div class="row">
                <div class="col-lg-12">
                    <div class="row">
                        <div class="col-lg-3 col-md-6">
                            <a href="#" onclick="getdatabystatus('1')">
                                <div class="panel panel-blue">
                                    <div class="panel-heading">
                                        <div class="row">
                                            <div class="col-xs-3">
                                                <i class="fa fa-refresh fa-5x"></i>
                                            </div>
                                            <div class="col-xs-9 text-right">
                                                <div class="huge">
                                                    <div id="ReceivedOrderCount"></div>
                                                </div>
                                                <div>Received!</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="panel-footer">
                                        <span class="pull-left">View Details</span>
                                        <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                                        <div class="clearfix"></div>
                                    </div>
                                </div>
                            </a>
                        </div>
                        <div class="col-lg-3 col-md-6">
                            <a href="#" onclick="getdatabystatus('2')">
                                <div class="panel panel-green">
                                    <div class="panel-heading">
                                        <div class="row">
                                            <div class="col-xs-3">
                                                <i class="fa fa-cogs fa-5x"></i>
                                            </div>
                                            <div class="col-xs-9 text-right">
                                                <div class="huge">
                                                    <div id="PreparingOrderCount"></div>
                                                </div>
                                                <div>Preparing!</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="panel-footer">
                                        <span class="pull-left">View Details</span>
                                        <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                                        <div class="clearfix"></div>
                                    </div>
                                </div>
                            </a>
                        </div>
                        <div class="col-lg-3 col-md-6">
                            <a href="#" onclick="getdatabystatus('3')">
                                <div class="panel panel-yellow">
                                    <div class="panel-heading">
                                        <div class="row">
                                            <div class="col-xs-3">
                                                <i class="fa fa-motorcycle fa-5x"></i>
                                            </div>
                                            <div class="col-xs-9 text-right">
                                                <div class="huge">
                                                    <div id="DispatchedOrderCount"></div>
                                                </div>
                                                <div>Dispatched!</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="panel-footer">
                                        <span class="pull-left">View Details</span>
                                        <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                                        <div class="clearfix"></div>
                                    </div>
                                </div>
                            </a>
                        </div>
                        <div class="col-lg-3 col-md-6">
                            <a href="#" onclick="getdatabystatus('6')">
                                <div class="panel panel-red">
                                    <div class="panel-heading">
                                        <div class="row">
                                            <div class="col-xs-3">
                                                <i class="fa fa-times fa-5x"></i>
                                            </div>
                                            <div class="col-xs-9 text-right">
                                                <div class="huge">
                                                    <div id="RejectedOrderCount"></div>
                                                </div>
                                                <div>Store Rejected!</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="panel-footer">
                                        <span class="pull-left">View Details</span>
                                        <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                                        <div class="clearfix"></div>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                    <div class="row">
                        <div class="panel panel-default">
                            <div class="panel-body">
                                <div class="breadcrumb"><input id="filter" type="text" class="form-control input-sm pull-right" placeholder="Type here..." style="display:none"><br /></div>
                                <div id="partial-load"></div>
                            </div>
                        </div>
                    </div>
                    @*<div class="table-responsive tables">
                            <div class="ContenedorTabla">
                                <table id="pruebatabla" class="table table-striped table-bordered table-hover dt-responsive nowrap ">
                                    <thead>
                                        <tr>
                                            <th id='column-header-1'>Status</th>
                                            <th id='column-header-2'>Total Count</th>
                                            <th id='column-header-3'>View</th>
                                        </tr>
                                    </thead>
                                    <tbody class="fht-tbody" id="tbody"></tbody>
                                </table>
                            </div>
                        </div>*@
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")

    <style>
        .huge {
            font-size: 40px;
        }

        .panel-blue {
            border-color: #337ab7;
        }

            .panel-blue > .panel-heading {
                border-color: #337ab7;
                color: white;
                background-color: #337ab7;
            }

        a > .panel-blue {
            color: #337ab7;
        }

        a:hover > .panel-blue {
            color: #337ab7;
        }

        .panel-red {
            border-color: #d9534f;
        }

            .panel-red > .panel-heading {
                border-color: #d9534f;
                color: white;
                background-color: #d9534f;
            }

        a > .panel-red {
            color: #d9534f;
        }

        a:hover > .panel-red {
            color: #b52b27;
        }

        .panel-green {
            border-color: #5cb85c;
        }

            .panel-green > .panel-heading {
                border-color: #5cb85c;
                color: white;
                background-color: #5cb85c;
            }

        a > .panel-green {
            color: #5cb85c;
        }

        a:hover > .panel-green {
            color: #3d8b3d;
        }

        .panel-yellow {
            border-color: #f0ad4e;
        }

            .panel-yellow > .panel-heading {
                border-color: #f0ad4e;
                color: white;
                background-color: #f0ad4e;
            }

        a > .panel-yellow {
            color: #f0ad4e;
        }

        a:hover > .panel-yellow {
            color: #df8a13;
        }
    </style>
    <script>
        $(document).ready(function () {
            (function ($) {
                $('#filter').keyup(function () {
                    var rex = new RegExp($(this).val(), 'i');
                    $('.searchable tr').hide();
                    $('.searchable tr').filter(function () {
                        return rex.test($(this).text());
                    }).show();
                })
            }(jQuery));
        });
    </script>
    <script>
        $(document).ready(function () {
            getdatabystatus("1");
        });
        function getdatabystatus(t) {
            var OrderStatusId = parseInt(t);
            $.ajax({
                type: 'GET',
                url: '/EverGreenDailyActivity/GetEverGreenOrders?OrderStatusId=' + OrderStatusId,
                dataType: 'json',
                //data: qry,
                traditional: true,
                async: true,
                success: function (Results) {
                    if (Results != null) {
                        $('#partial-load').empty().append(Results);
                        //statesProgress.hide();
                    }
                },
                error: function (Results) {
                    if (Results != null) {
                        $(this).button('loading').delay(1000).queue(function () {
                            $('#partial-load').empty().append(Results.responseText);
                            //statesProgress.hide();
                            //$('#btnExport').show();
                            $('#filter').show();
                            //$(this).button('complete');
                            $(this).dequeue();
                        });

                    }
                }
            });
        }
    </script>

    <style type="text/css">
        table#pruebatabla th,
        table#pruebatabla td {
            white-space: nowrap;
            padding: 3px 6px;
            word-wrap: break-word;
            overflow: hidden;
            overflow-x: auto;
        }
    </style>

    @*<script type="text/javascript">
            $(document).ready(function () {
                $("#pruebatabla").CongelarFilaColumna();
                //soloThead: false
            });
        </script>
          @*<script type="text/javascript">
            $(window).load(function () {
                var old_count = 0;
                var i = 0;
                setInterval(function () {
                    $.ajax({
                        url: "/Main/GetOrderStatusCount",
                        type: "GET",
                        contentType: "application/json;charset=utf-8",
                        dataType: "JSON",
                        success: function (result) {
                            var html = '';
                            var id = 0;
                            $.each(result.data, function (key, item) {
                                if (item.OrderStatusId == 1) {
                                    if (item.Count > old_count) {
                                        if (i == 0) {
                                            old_count = item.Count;
                                        }
                                        else {
                                            old_count = item.Count;
                                            var sound = document.getElementById("audio");
                                            sound.play()
                                        }
                                    } i = 1;
                                }
                                id = item.OrderStatusId
                                html += '<tr>';
                                //html += '<td>' + item.OrderStatusId + '</td>';
                                html += '<td>' + item.OrderStatus + '</td>';
                                html += '<td>' + item.Count + '</td>';
                                //html += '<td><a href="#" onclick="return getbyID(' + item.OrderStatusId + ')" class="btn btn-success btn-sm">View</a></td>';
                                html += '<td><a href="@Url.Action("GetEverGreenOrders", "EverGreenDailyActivity")?OrderStatusId=' + item.OrderStatusId + '" class="btn btn-success btn-sm">View</a></td>';
                                html += '</tr>';
                            });
                            $('#tbody').html(html);
                        },
                        error: function (errormessage) {
                            //alert(errormessage.responseText);
                        }
                    });
                    //});
                }, 1000);
            });
        </script>*@
    @*<script type="text/javascript">
            $(window).load(function () {
                var old_count = 0;
                var i = 0;
                setInterval(function () {
                    $.ajax({
                        url: "/Main/GetOrderStatusCount",
                        type: "GET",
                        contentType: "application/json;charset=utf-8",
                        dataType: "JSON",
                        success: function (result) {
                            var html = '';
                            var id = 0;
                            $.each(result.data, function (key, item) {
                                if (item.OrderStatusId == 1) {
                                    if (item.Count > old_count) {
                                        if (i == 0) {
                                            old_count = item.Count;
                                        }
                                        else {
                                            old_count = item.Count;
                                            var sound = document.getElementById("audio");
                                            sound.play()
                                        }
                                    } i = 1;
                                }
                                id = item.OrderStatusId
                                html += '<tr>';
                                //html += '<td>' + item.OrderStatusId + '</td>';
                                html += '<td>' + item.OrderStatus + '</td>';
                                html += '<td>' + item.Count + '</td>';
                                //html += '<td><a href="#" onclick="return getbyID(' + item.OrderStatusId + ')" class="btn btn-success btn-sm">View</a></td>';
                                html += '<td><a href="@Url.Action("GetEverGreenOrders", "EverGreenDailyActivity")?OrderStatusId=' + item.OrderStatusId + '" class="btn btn-success btn-sm">View</a></td>';
                                html += '</tr>';
                            });
                            $('#tbody').html(html);
                        },
                        error: function (errormessage) {
                            //alert(errormessage.responseText);
                        }
                    });
                    //});
                }, 1000);
            });
        </script>*@
}
